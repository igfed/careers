!function(){"use strict";var e=function(){return window.location.pathname.indexOf("/fr.")!==-1||window.location.pathname.indexOf("/fr/")!==-1?"fr":"en"}(),t=function(){return"ActiveXObject"in window}(),a=function(){function e(){c=$(".ig-form"),s=c.find("form"),r=c.find("form").data("endpoint"),l=c.find("form").data("cancel"),t(),o()}function t(){var e=$(":input, textarea");e.change(function(e){$(this).addClass("dirty")}),$.validator.setDefaults({debug:!0,success:"valid"}),$.validator.addMethod("cdnPostal",function(e,t){return this.optional(t)||e.match(/[a-zA-Z][0-9][a-zA-Z](-| |)[0-9][a-zA-Z][0-9]/)},"Please specify a valid postal code."),s.validate({submitHandler:function(){a()},errorPlacement:function(e,t){$(t).closest(".row").find(".custom-error-location").length?$(t).closest(".row").find(".custom-error-location").append(e):$(t).parent().append(e)},rules:{phone:{required:!0,phoneUS:!0},phone2:{required:!0,phoneUS:!0},postal_code:{required:!0,cdnPostal:!0},firstname:{required:!0,maxlength:100},lastname:{required:!0,maxlength:100},email:{required:!0,maxlength:100},email2:{required:!0,maxlength:100}}}),s.find("button.cancel").on("click",function(){window.location.replace(l)})}function a(e){var t,a;return s.valid()&&(s.removeClass("server-error"),c.addClass("submitting"),t=s.serializeArray(),a=n(t),i(a)),!1}function n(e){return e}function i(e){$.ajax({method:"POST",url:r,data:e}).success(function(e){c.addClass("success"),c.removeClass("submitting")}).error(function(e){s.addClass("server-error"),c.removeClass("submitting"),ScrollMan.to($("#server-error"))})}function o(){$(".toggler").on("click",function(){$(".toggle-content").hide(),$("."+$(this).data("content")).show()})}var r,l,s,c;return{init:e}}(),n=function(){function e(){console.log("Carousel Initialized!"),$("[data-responsive-toggle] button").on("click",function(){$("body").toggleClass("site-header-is-active")}),t()}function t(){var e,t,a;$(".ig-carousel").each(function(n){a=$(this),e=a.data("prevArrowText")?'<button type="button" class="slick-prev"><span class="show-for-sr">'+a.data("prevArrowText")+"</span></button>":'<button type="button" class="slick-prev"><span class="show-for-sr">Previous</span></button>',t=a.data("nextArrowText")?'<button type="button" class="slick-next"><span class="show-for-sr">'+a.data("nextArrowText")+"</span></button>":'<button type="button" class="slick-next"><span class="show-for-sr">Next</span></button>',a.slick({adaptiveHeight:a.data("adaptiveHeight")||!1,arrows:a.data("arrows")||!1,autoPlay:a.data("autoPlay")||!1,dots:a.data("dots")||!1,fade:a.data("fade")||!1,infinite:a.data("infinite")||!1,mobileFirst:!0,nextArrow:t,prevArrow:e,responsive:a.data("responsive")||"",slide:a.data("slide")||"",slidesToScroll:a.data("slideToScroll")||1,slidesToShow:a.data("slidesToShow")||1,speed:a.data("speed")||300})})}return{init:e}}(),i=function(e){function t(){a()}function a(){!function(t){t.fn.infoToggle=function(){return this.each(function(){function a(){s.on("click",n),t(e).on("resize",i),o()}function n(){o(),r.toggleClass("active"),e.setTimeout(o)}function i(){c&&l.css({height:"auto"})}function o(){var e;r.hasClass("active")?(e=l[0].scrollHeight,c=!0):(e=0,c=!1),l.css({height:e}),d&&l.attr("aria-hidden",!c)}var r=t(this),l=r.find(".info-toggle-content"),s=r.find(".info-toggle-trigger"),c=!1,d="true"===r.attr("info-toggle-aria");a()}),this}}(jQuery),function(t){t.fn.circleAnimation=function(a){return this.each(function(){function n(t){t=t?t:0,i(),o.lineWidth=c,o.beginPath(),o.arc(s,s,u,-p,h*-Math.min(t,a/100)-p,!0),o.stroke(),o.lineWidth=d,o.beginPath(),o.arc(s,s,u,-p,h*-t-p,!0),o.stroke(),f++,f<110&&e.requestAnimationFrame(function(){n(f/100)})}function i(){o.fillRect(0,0,r.width,r.width)}var o,r=this,l=t(this),s=r.width/2,c=7,d=1,u=s-c,f=0,h=2*Math.PI,p=Math.PI/2,v=(new Date).getTime()+"CA";l.is("canvas")&&(o=r.getContext("2d"),o.strokeStyle="#0d263c",o.fillStyle="#e5e8e8",l.attr("circle-animation-id",v),t("body").delegate("[circle-animation-id="+v+"]","startAnimate",function(){f=0,n()}),t("body").delegate("[circle-animation-id="+v+"]","clearAnimate",i))}),this}}(jQuery),function(e){e.fn.blockLink=function(){return this.each(function(){function t(){n.on("click",a)}function a(){location=i}var n=e(this),i=n.find("a").attr("href");t()}),this}}(jQuery),function(t){function a(){r=new i,o=new n(r),e.location.pathname.indexOf("/fr/")!==-1&&t("body").addClass("fr"),t('a[href^="#"]').on("click",function(e){var a=t(this.getAttribute("href"));a.length&&(e.preventDefault(),t("html, body").stop().animate({scrollTop:a.offset().top+52},750)),"#"!==a.selector&&(t("#main-menu-anchor").css({display:"none"}),t("body").removeClass("is-reveal-open branded"))}),t(".menu-icon").on("click",function(e){t("body").addClass("is-reveal-open branded")}),t(".top-bar .close-button.show-for-small-only").on("click",function(){t("#main-menu-anchor").css({display:"none"}),t("body").removeClass("is-reveal-open branded")}),t(e).resize(function(){t(e).width()>640&&t("body").removeClass("branded")})}function n(a){function n(){i(),t(".block-link").blockLink(),m=t(".our-business-slider"),t("#edge-overlay-content").find(".carousel-next").on("click",function(e){e.preventDefault(),m.slick("slickNext"),_satellite.track("carousel_scroll")}),t(".video-slide.slick-active").length?(t(".slick-list.draggable").css({height:"660px"}),t(".section.profiles-slider").css({backgroundColor:"#e5e8e8"})):(t(".slick-list.draggable").css({height:"auto"}),t(".section.profiles-slider").css({backgroundColor:"#7ec4b9"})),t(".profile-counter").each(function(){var e=t(this);e.find("canvas").circleAnimation(parseInt(e.find("p").html()))}),k=t(".profiles-slider"),t(e).on("hashchange",c),c(),t(e).on("resize",l),h(!0),t(e).on("scroll",s),p(),t(".info-toggle").infoToggle(),t(".top-bar + .screen").on("click",function(){t("a[data-toggle]").trigger("click")}),t(".share-toggle-trigger").on("click",function(e){e.preventDefault(),t(".info-toggle").addClass("active")}),t(".share-toggle-close").on("click",function(e){e.stopPropagation(),e.preventDefault(),t(".info-toggle").toggleClass("active")})}function i(){t("body").delegate($,"click",function(){var e=t(this),a=e.attr("class").match(/toggle-(\S*)?($|\s)/)[1],n=e.parents(x);n.find($).removeClass("active"),n.find(C).removeClass("active"),e.addClass("active"),n.find(".content-"+a).addClass("active")})}function o(){var e,a=0;O&&(k.find(".slick-slide").removeClass("slick-complete"),k.find(".slick-active").addClass("slick-complete"),k.find(".slick-slide:not(.slick-complete)").find(".profile-counter canvas").trigger("clearAnimate"),k.find(".slick-complete").find(".profile-counter canvas").trigger("startAnimate"),k.find(".slick-active").is("[class*=profile-]")||A?k.addClass("contrast-arrow"):k.removeClass("contrast-arrow"),e=k.find(".profile-1-slide, .profile-2-slide"),e.css({height:"auto"}),e.each(function(){var e=t(this).outerHeight();e>a&&(a=e)}),e.css({height:a}))}function r(e,t){e.slick("slickSetOption","accessibility",t),e.slick("slickSetOption","draggable",t),e.slick("slickSetOption","swipe",t),e.slick("slickSetOption","touchMove",t)}function l(){b&&e.clearTimeout(b),b=e.setTimeout(h,250)}function s(){w&&e.clearTimeout(w),w=e.setTimeout(p,250)}function c(e){var t="#our-edge-";y||0!==location.hash.indexOf(t)||S.openOverlay(T,d,u,!0)}function d(e){var a;g(m,{dots:!1,slidesToShow:1,slidesToScroll:1}),a=m.find("."+location.hash.replace("#our-","")+":not(.slick-cloned)").attr("data-slick-index"),m.slick("slickGoTo",a,!0),m.on("afterChange",f),f(null,null,parseInt(t("#modalOverlay .slick-active").attr("data-slick-index"))),h(),y=!0}function u(e){var a,n=t("#modalOverlay > div");m.slick("unslick"),m.off("afterChange"),t(".overlay-repository").append(n),"pushState"in history?history.pushState("",document.title,location.pathname+location.search):(a=t(document).scrollTop(),location.hash="",t(document).scrollTop(a)),y=!1}function f(e,a,n){var i=(n+1)%(t(".slick-slide:not(.slick-cloned)").length-1),o=t(m.find("[data-slick-index="+i+"] .columns:first-child p").get(0)).html(),r="our-"+m.find("[data-slick-index="+n+"]").attr("class").match(/(edge-\S*)/)[1];t("#modalOverlay .carousel-next a").html(o),location.hash=r}function h(a){var n=t(e).width(),i=0,o=n<i;m.is(".slick-initialized")&&r(m,!o),A!==o?A=o:a&&v()}function p(){O||t(e).scrollTop()+t(e).height()>k.offset().top&&(O=!0,e.setTimeout(o,500))}function v(){g(k,{dots:!0,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0,prevArrow:'<span type="button" class="carousel-prev ga-careers-our-people-carousel-scroll"><img src="/content/dam/investorsgroup/app/careers/images/Arrow-MainArticle-Carousel-Black-L.png"></span>',nextArrow:'<span type="button" class="carousel-next ga-careers-our-people-carousel-scroll"><img src="/content/dam/investorsgroup/app/careers/images/Arrow-MainArticle-Carousel-Black-R.png"></span>'}),o(),k.on("afterChange",o)}function g(e,a){var n={speed:750,dots:!0,dotsClass:"slick-dots ga-careers-our-people-carousel-scroll",slidesToShow:2,slidesToScroll:2,infinite:!0,responsive:[{breakpoint:768,settings:{slidesToShow:1,slidesToScroll:1,infinite:!0}}]};e.slick(t.extend(n,a))}var m,k,b,w,y,$='[class*="toggle-"]:not([class*="info-toggle"])',C='[class*="content-"]',x=".multi-tab-outline",T=t("#edge-overlay-content"),S=a,A=(t("<div></div>"),!1),O=!1;n()}function i(){function a(){h=t("<div></div>"),h.attr("id","modalOverlay"),h.attr("class","reveal"),h.attr("data-reveal",!0),g.append(h),h.on("open.zf.reveal",o),t(e).on("closed.zf.reveal",i),t(e).on("resize",n),r(),new Foundation.Reveal(h)}function n(){p&&e.clearTimeout(p),p=e.setTimeout(f,250)}function i(e){k=!1,m.close&&m.close(e),u(),m={}}function o(e){e.preventDefault(),k=!0,t("body").addClass("is-reveal-open"),h.find("*").foundation(),m.open&&m.open(e),f()}function r(){var e=t("<span></span>");v=t("<button data-close></button>"),v.addClass("close-button"),v.attr("aria-label","Close modal"),e.attr("aria-hidden",!0),e.html("&times;"),v.append(e)}function l(){return k}function s(e,t,a,n){m.open=t,m.close=a,m.full=n,"string"==typeof e?c(e):d(e)}function c(e){t.ajax(e).done(d)}function d(e){h.html(e),h.append(v),m.full&&h.addClass("full"),h.foundation("open")}function u(){h.removeClass("full"),h.removeClass("tour"),h.html("")}function f(){var a=h.height(),n=t(e).height();a>n&&(h.css({top:0}),h.addClass("full"))}var h,p,v,g=t("body"),m={},k=!1;return a(),{openOverlay:s,isOpen:l}}var o,r;a()}(jQuery)}return{init:t}}(window),o=function(a){function n(){i(),t||(h=setInterval(function(){$(".vjs-plugins-ready").length&&(s(),clearInterval(h))},500),u())}function i(){var e,a={},n=["auto","metadata","none"];$(".ig-video-group").each(function(){e=$(this),a.player=e.data("player"),e.find(".ig-video-js").each(function(e){p=$(this),a.id=p.data("id"),a.title=p.data("title")?p.data("title"):"",a.description=p.data("description")?p.data("description"):"",t?r(a,p):(a.overlay=p.data("overlay")?p.data("overlay"):"",a.auto=p.data("autoplay")?"autoplay":"",a.preload=n.indexOf(p.data("preload"))>-1?p.data("preload"):"auto",a.transcript=p.data("transcript")?p.data("transcript"):"",a.ctaTemplate=p.data("ctaTemplate")?p.data("ctaTemplate"):"",v.indexOf(a.id)===-1&&v.push(a.id),o(a,e))}),t||l(a)})}function o(t,a){var n={en:"Transcript",fr:"Transcription"},i='<div class="video-container '+t.id+'"><div class="video-container-responsive">';t.ctaTemplate.length>0&&(i+='<span class="video-cta">'+t.ctaTemplate+"</span>"),t.overlay.length>0&&(i+='<span class="video-overlay" style="background-image: url(\''+t.overlay+"');\"></span>"),i+='<video data-setup=\'{"techOrder": ["html5"]}\' data-video-id="'+t.id+'" preload="'+t.preload+'" data-account="3906942861001" data-player="'+t.player+'" data-embed="default" data-application-id="'+a+'" class="video-js" id="'+t.id+'" controls '+t.auto+"></video></div>",t.transcript.length>0&&(i+='<div class="video-transcript"><a target="_blank" href="'+t.transcript+'">'+n[e]+"</a></div>"),i+='</div><h2 class="video-title '+t.id+'">'+t.title+'</h2><p class="video-description">'+t.description+"</p>",p=p.replaceWith(i),t.overlay&&$(document).on("click","#"+t.id,function(){$(this).siblings(".video-overlay").hide()})}function r(e){var t='<div class="video-container">\n      <div class="video-container-responsive">\n      <iframe class="video-js" src=\'//players.brightcove.net/3906942861001/'+e.player+"_default/index.html?videoId="+e.id+"'\n    allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe>\n    </div>\n    </div><h2 class=\"video-title "+e.id+'">'+e.title+'</h2><p class="video-description">'+e.description+"</p>";p=p.replaceWith(t)}function l(e){var t='<script src="//players.brightcove.net/3906942861001/'+e.player+'_default/index.min.js"></script>';$("body").append(t)}function s(){var e;v.forEach(function(t){videojs("#"+t).ready(function(){e=this,e.on("play",c),e.on("ended",d),g.push(e)})})}function c(e){$("."+e.target.id).hasClass("played")||($("."+e.target.id).addClass("played"),a.digitalData.event.id=e.target.id,a.digitalData.event.title=f(e.target.id),_satellite.track("video_start"));var t=e.target.id;g.forEach(function(e){e.id()!==t&&videojs(e.id()).pause()})}function d(e){a.digitalData.event.id=e.target.id,a.digitalData.event.title=f(e.target.id),_satellite.track("video_end"),$("."+e.target.id).addClass("complete")}function u(){$(a).scroll(function(){g.forEach(function(e){$("#"+e.id()).visible()||videojs(e.id()).pause()})})}function f(e){return $(".video-title."+e).first().text()}var h,p,v=[],g=[];return{init:n}}(window),r=function(){function e(){t()}function t(){function e(e){e.searchtype="office",e.name="",$(".zero-results").addClass("hide"),$.getJSON(n,e).always().done(function(e){var t=JSON.parse(e);window.digitalData.event.searchResults=t.length>0?t.length:0,window.digitalData.event.searchType="careers",window.digitalData.event.searchTerm=i.val(),_satellite.track("search_careers"),t.length?($("body").addClass("is-reveal-open"),$("#searchResultsModal").removeClass("closed").html(""),a("office-template",t)):$(".zero-results").removeClass("hide")}).fail(function(e){console.log("Data could not be retrieved, please try again",e.status+" "+e.statusText)})}function t(){var e={},t=i.val();e.city="",e.lang=o,e.searchtype="con";for(var a=t.split(" "),n=0;n<a.length;n++){var l=r.locations.get(a[n]);l.length>0&&(e.city=l[0],a.splice(n,1))}return e.city||(e.city=a.join(" ")),e}function a(e,t){var a=document.getElementById(e).innerHTML;Mustache.parse(a);var n=Mustache.render(a,t);$("#searchResultsModal").append(n),$(document).foundation()}var n="https://search.investorsgroup.com/api/cwpsearch?",i=$("#FindAnOffice"),o="en";window.location.href.indexOf("/fr/")>-1&&(o="fr");var r={},l=["athabasca","bluffton","bonnyville","brooks","calgary","camrose","canmore","drayton valley","edmonton","fort mcmurray","fort saskatchewan","grande prairie","halkirk","hillcrest mines","hinton","leduc","lethbridge","lloydminster","medicine hat","morinville","peace river","pincher creek","provost","red deer","sherwood park","spruce grove","st. albert","stettler","sturgeon county","tofield","vermilion","wainwright","westlock","whitelaw","abbotsford","brackendale","burnaby","burns lake","campbell river","chase","chilliwack","comox","coquitlam","courtenay","cranbrook","dawson creek","duncan","fort nelson","fort st. john","invermere","kamloops","kelowna","langley","merritt","nanaimo","nelson","north vancouver","oliver","penticton","port alberni","powell river","prince george","qualicum beach","quesnel","revelstoke","richmond","saanichton","salmon arm","salt spring island","sechelt","sidney","smithers","surrey","terrace","trail","vancouver","vernon","victoria","westbank","williams lake","brandon","dauphin","flin flon","gillam","killarney","manitou","miami","morden","narol","portage la prairie","selkirk","swan river","the pas","virden","warren","winnipeg","bathurst","bedell","edmundston","fredericton","lansdowne","miramichi","moncton","quispamsis","rexton","rothesay","saint john","saint paul","sussex","blaketown","clarenville","corner brook","gander","grand falls - windsor","marystown","roaches line","st. john's","trinity","amherst","antigonish","barrington passage","belliveau cove","bridgetown","bridgewater","dartmouth","dayton","halifax","middleton","new glasgow","new minas","north sydney","pictou","port hawkesbury","sydney","truro","yellowknife","ajax","algonquin highlands","ancaster","atikokan","barrie","belleville","bowmanville","bracebridge","brampton","brantford","brockville","brooklin","burlington","cambridge","carleton place","chatham","clayton","clinton","cobourg","collingwood","concord","cornwall","dryden","dundas","dunsford","dutton","elliot lake","etobicoke","fort frances","gananoque","garson","greely","grimsby","guelph","haileybury","hamilton","hanover","hearst","huntsville","jerseyville","kanata","kapuskasing","kenora","kingston","kirkland lake","kitchener","langton","lindsay","london","maple","marathon","markham","merrickville","milton","minden","mississauga","mount forest","mount hope","nepean","new liskeard","newmarket","niagara falls","north bay","north york","oak ridges","oakville","orangeville","orillia","orton","oshawa","ottawa","owen sound","parry sound","pembroke","penetanguishene","perth","peterborough","petrolia","pickering","red lake","ridgetown","sarnia","sault ste. marie","scarborough","schreiber","simcoe","sioux lookout","st. catharines","st. marys","stouffville","stratford","sturgeon falls","sudbury","sundridge","thunder bay","tillsonburg","timmins","toronto","trenton","Uxbridge","val caron","walkerton","waterloo","welland","whitby","willowdale","windsor","wingham","woodbridge","charlottetown, pe","souris, pe","summerside, pe","wellington","anjou","boisbriand","boucherville","brossard","châteauguay","chicoutimi","côte saint-luc","dollard-des-ormeaux","gatineau","granby","laval","lévis","mirabel","montreal","new richmond","pointe-claire","québec","sept-iles","sherbrooke","ville st-laurent","westmount","eastend","estevan","esterhazy","foam lake","humboldt","kindersley","leader","maple creek","meadow lake","melfort","melville","moose jaw","north battleford","outlook","oxbow","prince albert","regina","regina beach","rosetown","saskatoon","shellbrook","swift current","watrous","watson","yorkton","whitehorse"];r.locations=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,local:l}),$(function(){$(".typeahead").typeahead({highlight:!0},{name:"locations",source:r.locations,limit:2}),$(".ig-search").submit(function(a){a.preventDefault();var n=t();e(n)}),$(document).on("click","#searchResultsModal .close-button",function(){$("#searchResultsModal").addClass("closed"),setTimeout(function(){$("body").removeClass("is-reveal-open")},400)})})}return{init:e}}(),l=function(){function e(){$(document).on("click",".ga-careers-city-search, .ga-careers-learn-more",function(){setTimeout(function(){$("body.is-reveal-open").length>0&&(window._satellite=window._satellite||{},window._satellite.track=window._satellite.track||function(){},_satellite.track(t))},1500)})}var t="modal_click";return{init:e}}();window._satellite=window._satellite||{},window._satellite.track=window._satellite.track||function(){},window.digitalData.event={};var s=function(){function e(){$(document).foundation(),$(".ig-form").length&&a.init(),$(".ig-carousel").length&&n.init(),$(".ig-search").length&&r.init(),$(".ig-careers").length&&i.init(),$(".ig-video-group").length&&o.init(),l.init()}return{init:e}}();$(document).ready(function(){s.init()})}();