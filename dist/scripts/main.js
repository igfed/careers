!function(){"use strict";var e=function(){return window.location.pathname.indexOf("/fr/")!==-1?"fr":"en"}(),t=(new EventEmitter,function(){function e(){c=$(".ig-form"),r=c.find("form"),s=c.find("form").data("endpoint"),l=c.find("form").data("cancel"),t(),a()}function t(){var e=$(":input, textarea");e.change(function(e){$(this).addClass("dirty")}),$.validator.setDefaults({debug:!0,success:"valid"}),$.validator.addMethod("cdnPostal",function(e,t){return this.optional(t)||e.match(/[a-zA-Z][0-9][a-zA-Z](-| |)[0-9][a-zA-Z][0-9]/)},"Please specify a valid postal code."),r.validate({submitHandler:function(){n()},errorPlacement:function(e,t){$(t).closest(".row").find(".custom-error-location").length?$(t).closest(".row").find(".custom-error-location").append(e):$(t).parent().append(e)},rules:{phone:{required:!0,phoneUS:!0},phone2:{required:!0,phoneUS:!0},postal_code:{required:!0,cdnPostal:!0},firstname:{required:!0,maxlength:100},lastname:{required:!0,maxlength:100},email:{required:!0,maxlength:100},email2:{required:!0,maxlength:100}}}),r.find("button.cancel").on("click",function(){window.location.replace(l)})}function n(e){var t,n;return r.valid()&&(r.removeClass("server-error"),c.addClass("submitting"),t=r.serializeArray(),n=i(t),o(n)),!1}function i(e){return e}function o(e){$.ajax({method:"POST",url:s,data:e}).success(function(e){c.addClass("success"),c.removeClass("submitting")}).error(function(e){r.addClass("server-error"),c.removeClass("submitting"),ScrollMan.to($("#server-error"))})}function a(){$(".toggler").on("click",function(){$(".toggle-content").hide(),$("."+$(this).data("content")).show()})}var s,l,r,c;return{init:e}}()),n=function(){function e(){console.log("Carousel Initialized!"),$("[data-responsive-toggle] button").on("click",function(){$("body").toggleClass("site-header-is-active")}),t()}function t(){var e,t,n;$(".ig-carousel").each(function(i){n=$(this),e=n.data("prevArrowText")?'<button type="button" class="slick-prev"><span class="show-for-sr">'+n.data("prevArrowText")+"</span></button>":'<button type="button" class="slick-prev"><span class="show-for-sr">Previous</span></button>',t=n.data("nextArrowText")?'<button type="button" class="slick-next"><span class="show-for-sr">'+n.data("nextArrowText")+"</span></button>":'<button type="button" class="slick-next"><span class="show-for-sr">Next</span></button>',n.slick({adaptiveHeight:n.data("adaptiveHeight")||!1,arrows:n.data("arrows")||!1,autoPlay:n.data("autoPlay")||!1,dots:n.data("dots")||!1,fade:n.data("fade")||!1,infinite:n.data("infinite")||!1,mobileFirst:!0,nextArrow:t,prevArrow:e,responsive:n.data("responsive")||"",slide:n.data("slide")||"",slidesToScroll:n.data("slideToScroll")||1,slidesToShow:n.data("slidesToShow")||1,speed:n.data("speed")||300})})}return{init:e}}(),i=function(){function e(){t()}function t(){!function(e){e.fn.infoToggle=function(){return this.each(function(){function t(){l.on("click",n),e(window).on("resize",i),o()}function n(){o(),a.toggleClass("active"),window.setTimeout(o)}function i(){r&&s.css({height:"auto"})}function o(){var e;a.hasClass("active")?(e=s[0].scrollHeight,r=!0):(e=0,r=!1),s.css({height:e}),c&&s.attr("aria-hidden",!r)}var a=e(this),s=a.find(".info-toggle-content"),l=a.find(".info-toggle-trigger"),r=!1,c="true"===a.attr("info-toggle-aria");t()}),this}}(jQuery),function(e){e.fn.circleAnimation=function(t){return this.each(function(){function n(e){e=e?e:0,i(),o.lineWidth=r,o.beginPath(),o.arc(l,l,d,-p,f*-Math.min(e,t/100)-p,!0),o.stroke(),o.lineWidth=c,o.beginPath(),o.arc(l,l,d,-p,f*-e-p,!0),o.stroke(),u++,u<110&&window.requestAnimationFrame(function(){n(u/100)})}function i(){o.fillRect(0,0,a.width,a.width)}var o,a=this,s=e(this),l=a.width/2,r=7,c=1,d=l-r,u=0,f=2*Math.PI,p=Math.PI/2,h=(new Date).getTime()+"CA";s.is("canvas")&&(o=a.getContext("2d"),o.strokeStyle="#0d263c",o.fillStyle="#e5e8e8",s.attr("circle-animation-id",h),e("body").delegate("[circle-animation-id="+h+"]","startAnimate",function(){u=0,n()}),e("body").delegate("[circle-animation-id="+h+"]","clearAnimate",i))}),this}}(jQuery),function(e){e.fn.blockLink=function(){return this.each(function(){function t(){i.on("click",n)}function n(){location=o}var i=e(this),o=i.find("a").attr("href");t()}),this}}(jQuery),function(e){function t(){a=new i,o=new n(a),window.location.pathname.indexOf("/fr/")!==-1&&e("body").addClass("fr"),e('a[href^="#"]').on("click",function(t){var n=e(this.getAttribute("href"));n.length&&(t.preventDefault(),e("html, body").stop().animate({scrollTop:n.offset().top+52},750)),"#"!==n.selector&&(e("#main-menu-anchor").css({display:"none"}),e("body").removeClass("is-reveal-open branded"))}),e(".menu-icon").on("click",function(t){e("body").addClass("is-reveal-open branded")}),e(".top-bar .close-button.show-for-small-only").on("click",function(){e("#main-menu-anchor").css({display:"none"}),e("body").removeClass("is-reveal-open branded")}),e(window).resize(function(){e(window).width()>640&&e("body").removeClass("branded")})}function n(t){function n(){i(),e(".block-link").blockLink(),g=e(".our-business-slider"),e("#edge-overlay-content").find(".carousel-next").on("click",function(e){e.preventDefault(),g.slick("slickNext")}),e(".video-slide.slick-active").length?(e(".slick-list.draggable").css({height:"660px"}),e(".section.profiles-slider").css({backgroundColor:"#e5e8e8"})):(e(".slick-list.draggable").css({height:"auto"}),e(".section.profiles-slider").css({backgroundColor:"#7ec4b9"})),e(".profile-counter").each(function(){var t=e(this);t.find("canvas").circleAnimation(parseInt(t.find("p").html()))}),m=e(".profiles-slider"),e(window).on("hashchange",r),r(),e(window).on("resize",s),f(!0),e(window).on("scroll",l),p(),e(".info-toggle").infoToggle(),e(".top-bar + .screen").on("click",function(){e("a[data-toggle]").trigger("click")}),e(".share-toggle-trigger").on("click",function(t){t.preventDefault(),e(".info-toggle").addClass("active")}),e(".share-toggle-close").on("click",function(t){t.stopPropagation(),t.preventDefault(),e(".info-toggle").toggleClass("active")})}function i(){e("body").delegate(b,"click",function(){var t=e(this),n=t.attr("class").match(/toggle-(\S*)?($|\s)/)[1],i=t.parents($);i.find(b).removeClass("active"),i.find(C).removeClass("active"),t.addClass("active"),i.find(".content-"+n).addClass("active")})}function o(){var t,n=0;A&&(m.find(".slick-slide").removeClass("slick-complete"),m.find(".slick-active").addClass("slick-complete"),m.find(".slick-slide:not(.slick-complete)").find(".profile-counter canvas").trigger("clearAnimate"),m.find(".slick-complete").find(".profile-counter canvas").trigger("startAnimate"),m.find(".slick-active").is("[class*=profile-]")||S?m.addClass("contrast-arrow"):m.removeClass("contrast-arrow"),t=m.find(".profile-1-slide, .profile-2-slide"),t.css({height:"auto"}),t.each(function(){var t=e(this).outerHeight();t>n&&(n=t)}),t.css({height:n}))}function a(e,t){e.slick("slickSetOption","accessibility",t),e.slick("slickSetOption","draggable",t),e.slick("slickSetOption","swipe",t),e.slick("slickSetOption","touchMove",t)}function s(){w&&window.clearTimeout(w),w=window.setTimeout(f,250)}function l(){k&&window.clearTimeout(k),k=window.setTimeout(p,250)}function r(e){var t="#our-edge-";y||0!==location.hash.indexOf(t)||x.openOverlay(T,c,d,!0)}function c(t){var n;v(g,{dots:!1,slidesToShow:1,slidesToScroll:1}),n=g.find("."+location.hash.replace("#our-","")+":not(.slick-cloned)").attr("data-slick-index"),g.slick("slickGoTo",n,!0),g.on("afterChange",u),u(null,null,parseInt(e("#modalOverlay .slick-active").attr("data-slick-index"))),f(),y=!0}function d(t){var n,i=e("#modalOverlay > div");g.slick("unslick"),g.off("afterChange"),e(".overlay-repository").append(i),"pushState"in history?history.pushState("",document.title,location.pathname+location.search):(n=e(document).scrollTop(),location.hash="",e(document).scrollTop(n)),y=!1}function u(t,n,i){var o=(i+1)%(e(".slick-slide:not(.slick-cloned)").length-1),a=e(g.find("[data-slick-index="+o+"] .columns:first-child p").get(0)).html(),s="our-"+g.find("[data-slick-index="+i+"]").attr("class").match(/(edge-\S*)/)[1];e("#modalOverlay .carousel-next a").html(a),location.hash=s}function f(t){var n=e(window).width(),i=0,o=n<i;g.is(".slick-initialized")&&a(g,!o),S!==o?S=o:t&&h()}function p(){A||e(window).scrollTop()+e(window).height()>m.offset().top&&(A=!0,window.setTimeout(o,500))}function h(){v(m,{dots:!0,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0,prevArrow:'<span type="button" class="carousel-prev"><img src="images/Arrow-MainArticle-Carousel-Black-L.svg"></span>',nextArrow:'<span type="button" class="carousel-next"><img src="images/Arrow-MainArticle-Carousel-Black-R.svg"></span>'}),o(),m.on("afterChange",o)}function v(t,n){var i={speed:750,dots:!0,slidesToShow:2,slidesToScroll:2,infinite:!0,responsive:[{breakpoint:768,settings:{slidesToShow:1,slidesToScroll:1,infinite:!0}}]};t.slick(e.extend(i,n))}var g,m,w,k,y,b='[class*="toggle-"]:not([class*="info-toggle"])',C='[class*="content-"]',$=".multi-tab-outline",T=e("#edge-overlay-content"),x=t,S=(e("<div></div>"),!1),A=!1;n()}function i(){function t(){f=e("<div></div>"),f.attr("id","modalOverlay"),f.attr("class","reveal"),f.attr("data-reveal",!0),v.append(f),f.on("open.zf.reveal",o),e(window).on("closed.zf.reveal",i),e(window).on("resize",n),a(),new Foundation.Reveal(f)}function n(){p&&window.clearTimeout(p),p=window.setTimeout(u,250)}function i(e){m=!1,g.close&&g.close(e),d(),g={}}function o(t){t.preventDefault(),m=!0,e("body").addClass("is-reveal-open"),f.find("*").foundation(),g.open&&g.open(t),u()}function a(){var t=e("<span></span>");h=e("<button data-close></button>"),h.addClass("close-button"),h.attr("aria-label","Close modal"),t.attr("aria-hidden",!0),t.html("&times;"),h.append(t)}function s(){return m}function l(e,t,n,i){g.open=t,g.close=n,g.full=i,"string"==typeof e?r(e):c(e)}function r(t){e.ajax(t).done(c)}function c(e){f.html(e),f.append(h),g.full&&f.addClass("full"),f.foundation("open")}function d(){f.removeClass("full"),f.removeClass("tour"),f.html("")}function u(){var t=f.height(),n=e(window).height();t>n&&(f.css({top:0}),f.addClass("full"))}var f,p,h,v=e("body"),g={},m=!1;return t(),{openOverlay:l,isOpen:s}}var o,a;t()}(jQuery)}return{init:e}}(),o=function(){function e(){t()}function t(){var e,t,a={},s=["auto","metadata","none"];$(".ig-video-group").each(function(){e=$(this),console.log($(this)),a.account=e.data("account"),a.player=e.data("player"),n(a),e.find(".ig-video-js").each(function(e){t=$(this),a.id=t.data("id"),a.title=t.data("title")?t.data("title"):"",a.description=t.data("description")?t.data("description"):"",a.auto=t.data("autoplay")?"autoplay":"",a.ctrl=t.data("controls")?"controls":"",a.preload=s.indexOf(t.data("preload"))>-1?t.data("preload"):"auto",o.push(a.id),i(t,a,e)})})}function n(e){var t='<script src="//players.brightcove.net/'+e.account+"/"+e.player+'_default/index.min.js"></script>';$("body").append(t)}function i(e,t,n){var i='<div class="video-container"><span class="video-overlay '+t.id+'"></span><div class="video-container-responsive"><video data-video-id="'+t.id+'" preload="'+t.preload+'" data-account="'+t.account+'" data-player="'+t.player+'" data-embed="default" data-application-id="'+n+'" class="video-js" id="'+t.id+'" '+t.ctrl+" "+t.auto+'></video></div></div><h2 class="video-title">'+t.title+'</h2><p class="video-description">'+t.description+"</p>";e.replaceWith(i)}var o=[];return{init:e}}(),a=function(){function e(){t()}function t(){function e(e){e.searchtype="office",e.name="",$(".zero-results").addClass("hide"),$.getJSON(i,e).always().done(function(e){var t=JSON.parse(e);t.length?($("body").addClass("is-reveal-open"),$("#searchResultsModal").removeClass("closed").html(""),n("office-template",t)):$(".zero-results").removeClass("hide")}).fail(function(e){console.log("Data could not be retrieved, please try again",e.status+" "+e.statusText)})}function t(){var e={},t=o.val();e.city="",e.lang=a,e.searchtype="con";for(var n=t.split(" "),i=0;i<n.length;i++){var l=s.locations.get(n[i]);l.length>0&&(e.city=l[0],n.splice(i,1))}return e.city||(e.city=n.join(" ")),e}function n(e,t){var n=document.getElementById(e).innerHTML;Mustache.parse(n);var i=Mustache.render(n,t);$("#searchResultsModal").append(i),$(document).foundation()}var i="https://search.investorsgroup.com/api/cwpsearch?",o=$("#FindAnOffice"),a="en";window.location.href.indexOf("/fr/")>-1&&(a="fr");var s={};s.locations=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,prefetch:"data/cities.json"}),$(function(){$(".typeahead").typeahead({highlight:!0},{name:"locations",source:s.locations,limit:2}),$(".ig-search").submit(function(n){n.preventDefault();var i=t();e(i)}),$(document).on("click","#searchResultsModal .close-button",function(){$("#searchResultsModal").addClass("closed"),setTimeout(function(){$("body").removeClass("is-reveal-open")},400)})})}return{init:e}}(),s=function(){function s(){$(document).foundation(),$(".ig-form").length&&t.init(),$(".ig-carousel").length&&n.init(),$(".ig-search").length&&a.init(),$(".ig-careers").length&&i.init(),$(".ig-video-group").length&&o.init(),l()}function l(){$("div.body-wrapper").addClass(e)}return{init:s}}();$(document).ready(function(){s.init()})}();